<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <!--STYLESHEETS-->
    <link href="tools/bootstrap/css/bootstrap.css" rel="stylesheet" type="text/css"/>
    <link href="tools/bootstrap/css/bootstrap-theme.css" rel="stylesheet" type="text/css"/>
    <title>MiFID kérdőív rendszer</title>
</head>


<body>
<div ng-app="mainApp">
    <!-- Specify a Angular controller script that binds Javascript variables to the feedback messages.-->
    <div class="row">
        <div class="col-md-4"></div>
        <div class="col-md-4">
            <div ng-controller="AlertMessagesCtrl">
                <uib-alert ng-repeat="alert in alerts" type="{{alert.type}}" close="closeAlert($index)">{{alert.msg}}
                </uib-alert>
            </div>
        </div>
        <div class="col-md-4"></div>
    </div>
    <!--PAGE HEADER-->
    <div class="page-header">
        <h1>MiFID
            <small>kérdőív rendszer</small>
        </h1>
    </div>
    <!--NAVBAR-->
    <ul class="nav nav-tabs">
        <li role="presentation" class="active"><a href="#">Kérdőívek</a></li>
        <li role="presentation"><a href="#">Termékek</a></li>
        <li role="presentation"><a href="#">Valami</a></li>
        <li role="presentation" class="dropdown">
            <a class="dropdown-toggle" data-toggle="dropdown" href="#" role="button" aria-haspopup="true"
               aria-expanded="false">
                Valami lenyíló <span class="caret"></span>
            </a>
            <ul class="dropdown-menu">

            </ul>
        </li>
    </ul>
    <p>

    </p>
    <div ng-controller="QuestionnaireCtrl">
        <div class="row">
            <!--KÉRDŐÍV SZERKESZTŐ-->
            <div class="col-md-5">
                <div class="panel panel-default">
                    <div class="panel-heading">
                        <h3 class="panel-title">Kérdőívek</h3>
                    </div>
                    <div class="panel-body">
                        <!--KÉRDŐÍV VÁLASZTÓ-->
                        <ul>
                            <li ng-repeat="oneQuestionnaire in allQuestionnaires">{{oneQuestionnaire.name}}</li>
                        </ul>
                        <div class="well well-lg">
                            <div class="form-group">
                                <div class="row">
                                    <div class="col-md-8">
                                        <label>Meglévő kérdőív szerkesztése</label>
                                        <select class="form-control" ng-model="quest.selected"
                                                ng-options="o as o for o in quest.options" ng-change="selectUpdate()"
                                                ng-disabled="!isCollapsed"></select>
                                    </div>
                                    <div class="col-md-1">
                                        <label>VAGY</label>
                                    </div>
                                    <!--KÉRDŐÍV FELVEVŐ-->
                                    <div class="col-md-3">
                                        <button type="button" class="btn btn-danger"
                                                ng-click="addQuestionnaire()" ng-disabled="!isCollapsed">
                                            Új kérdőív felvétele
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div uib-collapse="isCollapsed">
                            <div class="well well-lg">
                                <form name="questionnaireForm" ng-submit="submitQuestionnaireForm()">
                                    <div class="form-group"
                                         ng-class="{ 'has-error' : questionnaireForm.name.$invalid && !questionnaireForm.name.$pristine}">
                                        <label>Kérdőív elnevezése:</label>
                                        <input type="text" name="name" class="form-control"
                                               ng-model="questionnaire.name" questionnairenamevalidator>
                                        <p ng-show="questionnaireForm.name.$error.duplicate && !questionnaireForm.name.$pristine"
                                           class="help-block">Ilyen nevű kérdőív már van!</p>
                                        <p ng-show="questionnaireForm.name.$error.isempty && !questionnaireForm.name.$pristine"
                                           class="help-block">Kérdőív elnevezés megadása kötelező!</p>

                                    </div>
                                    <div class="form-group">
                                        <label>
                                            Leírás:
                                        </label>
                                        <input type="text" name="description" class="form-control"
                                               ng-model="questionnaire.description">
                                    </div>
                                    <div class="form-group">
                                        <div ng-controller="PopoverDemoCtrl">
                                            <label>Vonatkozó termék</label>
                                            <select class="form-control" ng-model="placement.selected"
                                                    ng-options="o as o for o in placement.options"></select>
                                        </div>
                                    </div>

                                    <div class="form-group">
                                        <label>Lehetséges kérdések és válaszok</label>
                                        <div class="form-group" ng-repeat="question in questionnaire.questions">
                                            <div class="input-group">
                                                <input type="text" class="form-control" ng-model="question.name">
                                                <div class="input-group-btn">
                                                    <button type="button" ng-click="removeQuestion($index)"
                                                            class="btn btn-danger">Törlés
                                                    </button>
                                                </div>
                                            </div>

                                            <div class="row">
                                                <div class="col-md-1">
                                                </div>
                                                <div class="col-md-11">
                                                    <div class="input-group" ng-repeat="answer in question.answers">
                                                        <input type="text" class="form-control input-sm"
                                                               ng-model="answer.name">
                                                        <div class="input-group-btn">
                                                            <button type="button"
                                                                    ng-click="removeAnswer($parent.$index, $index)"
                                                                    class="btn btn-danger btn-sm">
                                                                Törlés
                                                            </button>
                                                        </div>
                                                    </div>
                                                    <div class="input-group">
                                                        <input type="text" class="form-control input-sm"
                                                               ng-model="answerName"
                                                               placeholder="lehetséges válasz">
                                                        <div class="input-group-btn">
                                                            <button type="button" class="btn btn-default btn-sm"
                                                                    ng-click="addAnswer($index)">Hozzáad
                                                            </button>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <div class="input-group">
                                                <input type="text" class="form-control" ng-model="questionName"
                                                       placeholder="lehetséges kérdés">
                                                <div class="input-group-btn">
                                                    <button type="button" ng-click="addQuestion(questionName)"
                                                            class="btn btn-default">Hozzáad
                                                    </button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <input type="submit" class="btn btn-default"
                                           ng-disabled="questionnaireForm.$invalid" value="Mentés">
                                    <button type="button" class="btn btn-default" ng-click="isCollapsed = true">Mégse
                                    </button>
                                    <button type="button" class="btn btn-danger" ng-click="deleteQuestionnaire()">Kérdőív
                                        törlése
                                    </button>
                                </form>
                            </div>

                        </div>
                    </div>
                </div>
            </div>
            <!--KÉRDŐÍV ELŐNÉZET-->
            <div class="col-md-5">
                <div class="panel panel-default">
                    <div class="panel-heading">
                        <h3 class="panel-title">Előnézet</h3>
                    </div>
                    <div class="panel-body">
                        <h4>Kitöltendő kérdőív: {{questionnaire.name}}</h4>
                        <h6>{{questionnaire.description}}</h6>
                        <div ng-repeat="question in questionnaire.questions">
                            <label>{{$index+1}}. kérdés: {{question.name}}</label>
                            <div ng-repeat="answer in question.answers">
                                <input type="radio" name="question{{$parent.$index}}"
                                       value="{{answer}}{{$parent.$index}}"
                                       ng-model="question.selectedAnswer"
                                       ng-value="{{answer.name}}"/> {{answer.name}}
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>


<script src="lib/angular.js"></script>
<script src="lib/angular-resource.js"></script>
<script src="lib/angular-animate.js"></script>
<script src="lib/angular-route.js"></script>
<script src="app/app.js"></script>
<!--CONTROLLERS-->
<script src="app/controllers/QuestionnaireCtrl.js"></script>
<script src="app/controllers/AlertMessagesCtrl.js"></script>
<script src="app/controllers/PopoverDemoCtrl.js"></script>
<!--DIRECTIVES-->
<script src="app/directives/QuestionnaireNameValidator.js"></script>
<!--SERVICES-->
<script src="app/services/QuestionnairesService.js"></script>
<!--jQuery-->
<script src="tools/jQuery/jquery-1.12.2.min.js" type="text/javascript"></script>
<!--BootStrap-->
<script src="tools/bootstrap/js/bootstrap.min.js" type="text/javascript"></script>
<script src="tools/bootstrap/js/ui-bootstrap-tpls-1.2.4.min.js" type="text/javascript"></script>
</body>
</html>
